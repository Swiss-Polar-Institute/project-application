{% load crispy_forms_tags %}
{% crispy eligibility_decision_form %}

<script>
    function commentIsRequired(required) {
        if (required) {
            $('#div_id_eligibility_decision_form-comment .asteriskField').show();

            // This might not be working but Django on the server side is checking it (and giving a good error)
            $("#id_eligibility_decision-comment").attr('required', true);
        } else {
            $('#div_id_eligibility_decision_form-comment .asteriskField').hide();
            $("#id_eligibility_decision-comment").attr('required', false);
        }
    }

    $(document).ready(function () {
        var required = $('#id_eligibility_decision_form-eligible_2').prop('checked');
        commentIsRequired(required);

        $('#id_eligibility_decision_form-eligible_1').change(function () {
            commentIsRequired(!this.checked);
        });


        $('#id_eligibility_decision_form-eligible_2').change(function () {
            commentIsRequired(this.checked);
        });
    });
</script>
