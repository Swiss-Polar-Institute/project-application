{% load static %}

<script type="text/javascript" src="{% static 'js/orcid.js' %}"></script>

<script type="text/javascript" class="init">
    $("#div_id_{{ form_prefix }}-orcid .input-group-append").click(function () {
        function success(orcid_record) {
            let family_name = orcid_record['person']['name']['family-name'].value;
            let given_names = orcid_record['person']['name']['given-names'].value;

            $('#id_{{ form_prefix }}-first_name').val(given_names);
            $('#id_{{ form_prefix }}-surname').val(family_name);
        }

        function error() {
            alert('Error getting orcid id information');
        }

        let orcid_id = $('#id_{{ form_prefix }}-orcid.textinput.textInput.form-control').val()
        getOrcid(orcid_id, success, error);
    });

    $('#id_person_form-orcid').on('input', function () {
        $('#id_{{ form_prefix }}-first_name').val("");
        $('#id_{{ form_prefix }}-surname').val("");
    });
</script>