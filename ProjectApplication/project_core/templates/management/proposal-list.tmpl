{% extends '_base.tmpl' %}
{% load static %}
{% block title %}Projects application{% endblock %}

{% block body_contents %}
{% include 'management/_navbar.tmpl' with active='proposals' %}
<div class="container-fluid">
    <div class="row">
        {% include 'management/_proposals-sidebar.tmpl' with active='proposals-list' %}

        <div class="col-md-9 ml-sm-auto col-lg-10 px-4" role="main">

            <h1>List of proposals</h1>
            {% if proposals %}
            <table class="table table-striped table-sm table-hover display">
                <thead>
                <tr>
                    <td>Call</td>
                    <td>Title</td>
                    <td>Applicant</td>
                    <td>Status</td>
                    <td>Actions</td>
                </tr>
                </thead>
                <tbody>
                {% for proposal in proposals %}
                    <tr>
                        <td>{{ proposal.call.long_name }}</td>
                        <td>{{ proposal.title }}</td>
                        <td>{{ proposal.applicant.person }}</td>
                        <td>{{ proposal.proposal_status.name }}</td>
                        <td><a class="btn btn-primary btn-xs" href="{% url 'proposal-update' uuid=proposal.uuid %}">Edit</a></td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            {% else %}
            No submitted proposals in the system
            {% endif %}
        </div>
    </div>
        <script type="text/javascript" class="init">
        $(document).ready(function() {
            $('table.display').DataTable({
                "pageLength": 100,
                "order": [[ 0, "asc"],
                          [ 1, "asc"]]
                }
                );
        } );
        </script>
</div>
{% endblock %}
